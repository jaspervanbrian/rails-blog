<% @title = "Editing " + @post.title %>

<div class="container">
	<%= form_with scope: :post, model: @post, local: true do |p| %>
		<div class="row">
			<div class="col-12">
				<div class="list-group-item list-group-item-action flex-column align-items-start">
					<div class="d-flex w-100 justify-content-between">
						<h5 class="mb-1"><%= @post.title %></h5>
						<small class="text-muted"><%= @post.created_at.strftime("%B %d, %Y | %A, %l:%M %p") %></small>
					</div>
					<h6 class="d-inline">
						by <span class="badge badge-pill badge-danger"><%= @post.user.full_name %></span>
					</h6>
					<small class="text-muted"><%= @post.created_at === @post.updated_at ? "" : "(Last update: " + @post.created_at.strftime("%B %d, %Y | %A, %l:%M %p") + ")" %></small>
					<div class="float-right">
						<%= p.button type: "submit", class: "btn btn-success" do %>
							<%= icon("fas", "check") %>
						<% end %>
						<%= link_to @post, class: "btn btn-secondary" do %>
							<%= icon("fas", "times") %>
						<% end %>
					</div>
					<hr class="mt-4 mb-4">
					<p class="mb-1">
						<%= p.text_area :body, rows: 10, class: "form-control #{ @post.errors.include?(:body) ? 'is-invalid' : ''}", placeholder: "Say something...", required: true %>
						<% if @post.errors.include?(:body) %>
							<div class="invalid-feedback">
								<%= @post.errors[:body].join(", ").capitalize %>
							</div>
						<% end %>
					</p>
				</div>
			</div>
		</div>
	<% end %>
</div>