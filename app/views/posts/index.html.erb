<% @title = "All Posts" %>

<div class="container">
	<div class="row">
		<div class="col-4">
			<%= form_with scope: :post, url: posts_path, class: 'form-horizontal', local: true do |form| %>
				<div class="form-group">
					<%= form.text_field :title, :class => 'form-control', :placeholder => 'Title of your post' %>
				</div>
				<div class="form-group">
					<%= form.text_area :body, :class => 'form-control', :placeholder => 'Say something here!', :rows => 5 %>
				</div>
				<div class="form-group">
					<%= form.submit "Post", :class => 'btn btn-primary' %>
				</div>
			<% end %>
		</div>
		<div class="col-8" style="max-height: 80vh; overflow-y: scroll;">
			<div class="list-group">
				<%
					@posts.each do |post|
				%>
						<%= link_to post_path(post), { :class => 'list-group-item list-group-item-action flex-column align-items-start' } do %>
							<div class="d-flex w-100 justify-content-between">
								<h5 class="mb-1"><%= post.title %></h5>
								<small class="text-muted"><%= post.created_at.strftime("%B %d, %Y | %l:%M %p") %></small>
							</div>
							<p class="mb-1">
								<%= simple_format(truncate(post.body), length: 20) %>
							</p>
							<small class="text-muted">by <%= post.user.name %></small>
						<% end %>
				<%
					end
				%>
			</div>
		</div>
	</div>
</div>